Great question—let’s give that its own specialist:

# Perimeter Security & Cameras Agent

## Scope (what it owns)

* **Camera inventory & health**: model/firmware, RTSP/ONVIF endpoints, uptime, last clip, storage %.
* **Recording pipeline**: profiles (continuous, motion, smart detection), retention windows, auto-pruning.
* **Smart events**: person/vehicle/animal detection, line-crossing/zone intrusion, loitering, package detection.
* **Abnormality rules** (what triggers an alert):

  * Camera offline > N minutes or frequent flapping
  * No motion in high-traffic windows (possible misconfig)
  * Excess motion after curfew / while “Away”
  * Storage nearly full / clips not writing
  * FPS or bitrate collapse (cable/PoE issue)
* **Alerting & escalation**: push/email/SMS, attach snapshot/10-sec MP4, silent mode windows, escalation if repeated.
* **Privacy & compliance**: mask zones (sidewalk/neighbors), opt-out windows, encryption at rest, audit trail of accesses.

## How it fits the repo

```
packages/agents/cameras-security/
  ├─ src/
  │  ├─ health_monitor.ts
  │  ├─ event_rules.ts
  │  ├─ abnormality_detector.ts
  │  ├─ notifiers/
  │  └─ integrations/ (ONVIF, RTSP, NVR/Frigate/UniFi)
  ├─ tests/
  └─ README.md
packages/shared/integrations/
  ├─ onvif/
  ├─ rtsp/
  └─ nvr/ (Frigate, UniFi Protect, Blue Iris adapters)
```

## Inter-agent handoffs

* **Safety & Emergency Agent**: receives “critical” events (e.g., intrusion after curfew) and runs the escalation playbook (call tree, 911 guidance).
* **Dues & Budget Agent**: tracks storage/NVR license renewals or camera replacement costs.
* **Home Maintenance Agent**: creates tasks for “camera dirty,” “IR glare,” “firmware update,” or “PoE drop.”

## Initial MVP checklist

* Add cameras via ONVIF/RTSP, define zones & schedules
* Motion ↦ smart detection with basic person/vehicle classification
* Health checks (ping/RTSP probe), storage monitoring
* Notifications with image clip + timeline link
* Masks/privacy zones + retention policy

## “Abnormality” defaults (you can tweak)

* Offline > 3 minutes (warn), > 15 minutes (critical)
* Motion after 11pm in driveway/backyard when “Away”
* 24h with zero motion on a camera that usually has >10 events/day
* Storage > 85% (warn), > 95% (critical)
* Frame rate < 8 FPS for > 2 minutes

If you like this, I can append **ADR-001** with this agent and/or spin a new **ADR-005: Perimeter Security & Cameras** that defines rules, privacy masks, and integrations.
